<html>
<head>
<script type="text/javascript">
// GLOBAL FUNCTION
Array.prototype.counting_sort = function() {
    var i, j, k;
    // find min, max to set range of counts array
    var min = this[0];
    var max = this[0];
    for(i=0; i<this.length; i++) {
      if (min > this[i])
        min = this[i];
      else if (max < this[i])
        max = this[i];
    }
    var counts = []
    var newarray = []
    // initialize counts array
    for(i=0; i<max-min+1; i++) { 
      counts[i] = 0;
    }
    // count distinct values from input array array
    for(i=0; i<this.length; i++) { 
      counts[this[i]-min]++;
    }
    k = 0
    // write output values ordered by counts index
    // replicate output value according to repeat count
    for(i=0; i<counts.length; i++) { 
      for(j=0; j<counts[i]; j++) { 
        newarray[k++] = i + min;
      }
    }
    return(newarray)
}

// LOCAL FUNCTION
show = function (inarray, arrayname) {
  document.writeln("<h4>"+arrayname+":</h4>");
  for(i=0; i<inarray.length; i++)
    document.write(inarray[i]+((i+1==inarray.length)?"":", "));
  document.writeln("<br />");
} 
</script>
</head>
<body>
<script>
// MAIN
// test counting_sort function
sorted_array = [1, 4, 7, 2, 1, 3, 2, 1, 4, 2, 3, 2, 1].counting_sort();
// result: [1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 4, 4, 7]
show(sorted_array, "Sorted Array");
</script>
</body>
</html>